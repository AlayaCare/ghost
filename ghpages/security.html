<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Security | Goliac project</title>
    <meta name="description" content="Github Organization IAC made simple">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/goliac/assets/style.Cac8d1iq.css" as="style">
    <link rel="preload stylesheet" href="/goliac/vp-icons.css" as="style">
    
    <script type="module" src="/goliac/assets/app.B3RS0okb.js"></script>
    <link rel="preload" href="/goliac/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/goliac/assets/chunks/theme.DLkSX-LR.js">
    <link rel="modulepreload" href="/goliac/assets/chunks/framework.C0FZg82U.js">
    <link rel="modulepreload" href="/goliac/assets/security.md.DJ3lZZSr.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/goliac/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/goliac/logo_small.png" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>Goliac project</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/goliac/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/goliac/installation.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Documentation</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Alayacare/goliac" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Alayacare/goliac" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Documentation</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/goliac/why_goliac.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Why Goliac</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/goliac/quick_start.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Quick start</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/goliac/installation.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Installation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/goliac/security.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Security</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/goliac/troubleshooting.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Troubleshooting</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _goliac_security" data-v-39a288b8><div><h1 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h1><h2 id="security-hardening" tabindex="-1">Security hardening <a class="header-anchor" href="#security-hardening" aria-label="Permalink to &quot;Security hardening&quot;">​</a></h2><p>If you want to narrow down what Goliac is doing, you can create 2 github apps</p><ul><li>one to access only the team&#39;s repository</li><li>another one that dont have repository access, but only to the organization administrative APIs</li></ul><h3 id="teams-github-app" tabindex="-1">Teams GitHub App <a class="header-anchor" href="#teams-github-app" aria-label="Permalink to &quot;Teams GitHub App&quot;">​</a></h3><p>You need to</p><ul><li>Register new teams GitHub App <ul><li>in your profile settings, go to <code>Developer settings</code>/<code>GitHub Apps</code></li><li>Click on <code>New GitHub App</code></li></ul></li><li>Give basic information: <ul><li>GitHub App name can be <code>&lt;yourorg&gt;-goliac-app-teams</code></li><li>Homepage URL can be <code>https://github.com/Alayacare/goliac</code></li><li>Disable the active Webhook</li></ul></li><li>Under Repository permissions <ul><li>Give Read/Write access to <code>Administration</code> (needed to bypass the &#39;vaidate&#39; check)</li><li>Give Read/Write access to <code>Content</code> (needed to be able to udpate the repository)</li></ul></li><li>Where can this GitHub App be installed: <code>Only on this account</code></li><li>And Create</li><li>then you must <ul><li>collect the AppID</li><li>Generate (and collect) a private key (file)</li></ul></li><li>Go to the left tab &quot;Install App&quot; <ul><li>Click on &quot;Install&quot;</li><li>On Repository access, select &quot;Only select repositories&quot;, and select the team&#39;s repository</li></ul></li></ul><p>We will set ip up in Goliac with</p><ul><li><code>GOLIAC_GITHUB_TEAM_APP_ID</code> environment variable</li><li><code>GOLIAC_GITHUB_TEAM_APP_PRIVATE_KEY_FILE</code> environment variable</li></ul><h3 id="admin-github-app" tabindex="-1">Admin GitHub App <a class="header-anchor" href="#admin-github-app" aria-label="Permalink to &quot;Admin GitHub App&quot;">​</a></h3><p>If you already created a Github app (when following the installation instructions), you can use it, but remove the repository access</p><p>Else you need to</p><ul><li>Register new GitHub App <ul><li>in your profile settings, go to <code>Developer settings</code>/<code>GitHub Apps</code></li><li>Click on <code>New GitHub App</code></li></ul></li><li>Give basic information: <ul><li>GitHub App name can be <code>&lt;yourorg&gt;-goliac-app</code> (it will be used in the rulesets later)</li><li>Homepage URL can be <code>https://github.com/Alayacare/goliac</code></li><li>Disable the active Webhook</li></ul></li><li>Under Repository permissions <ul><li>Give Read/Write access to <code>Administration</code></li></ul></li><li>Under Organization permissions <ul><li>Give Read/Write access to <code>Administration</code></li><li>Give Read/Write access to <code>Members</code></li></ul></li><li>Where can this GitHub App be installed: <code>Only on this account</code></li><li>And Create</li><li>then you must <ul><li>collect the AppID</li><li>Generate (and collect) a private key (file)</li></ul></li><li>Go to the left tab &quot;Install App&quot; <ul><li>Click on &quot;Install&quot;</li><li>On Repository access, select &quot;All repositories&quot; (except if you are doing a test and want to select the repositories to manage)</li></ul></li></ul><p>We will set ip up in Goliac with</p><ul><li><code>GOLIAC_GITHUB_APP_ID</code> environment variable</li><li><code>GOLIAC_GITHUB_APP_PRIVATE_KEY_FILE</code> environment variable</li></ul><h2 id="networking" tabindex="-1">Networking <a class="header-anchor" href="#networking" aria-label="Permalink to &quot;Networking&quot;">​</a></h2><h3 id="outbond-connections" tabindex="-1">Outbond connections <a class="header-anchor" href="#outbond-connections" aria-label="Permalink to &quot;Outbond connections&quot;">​</a></h3><ul><li>By default Goliac use Github APIs (cf <code>GOLIAC_GITHUB_SERVER</code> environment variable). If you are using the default Github Cloud (i.e <code>https://github.com</code>) and want to firewall the IPs used by Goliac, check <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses" target="_blank" rel="noreferrer">https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses</a> for the list of API IPs adresses</li><li>if you enable Slack notification (see <a href="./installation.html#optional-slack-integration">Optional: Slack integration&quot;</a>, it will also try to connect to Slack API IPs )</li></ul><h3 id="inbound-connections" tabindex="-1">Inbound connections <a class="header-anchor" href="#inbound-connections" aria-label="Permalink to &quot;Inbound connections&quot;">​</a></h3><ul><li>Goliac has a public REST API (used by the UI) on the port <code>18000</code> by default ( <code>GOLIAC_SERVER_PORT</code> environment variable) and on the <code>localhost</code> port by default (<code>GOLIAC_SERVER_HOST</code> environement variable).</li><li>it has also a second host/port, <code>GOLIAC_GITHUB_WEBHOOK_HOST</code> (<code>localhost</code> default value) and <code>GOLIAC_GITHUB_WEBHOOK_PORT</code> (<code>18001</code> default value) if you want to receive webhook events.</li><li>so by default nothing is exposed externally. Except if you are using the Docker image where <code>GOLIAC_SERVER_HOST</code> is set to <code>0.0.0.0</code> by default.</li></ul><p>If you decide to configure Github webhook events (see <a href="./installation.html#optional-gitHub-webhook">Optional: GitHub webhook&quot;</a> ), it is recommended to setup webhook listener, by setting correctly</p><ul><li>the <code>GOLIAC_GITHUB_WEBHOOK_HOST</code> (you need to change the <code>localhost</code> default value)</li><li>the <code>GOLIAC_GITHUB_WEBHOOK_PORT</code> (<code>18001</code> by default)</li><li>the <code>GOLIAC_GITHUB_WEBHOOK_PATH</code> (<code>/webhook</code> by default)</li><li>and the <code>GOLIAC_GITHUB_WEBHOOK_SECRET</code> (empty by default)</li></ul><h3 id="restricting-goliac-ui-and-rest-api" tabindex="-1">Restricting Goliac UI and REST API <a class="header-anchor" href="#restricting-goliac-ui-and-rest-api" aria-label="Permalink to &quot;Restricting Goliac UI and REST API&quot;">​</a></h3><p>By default the UI (and the REST API) are listening on <code>localhost</code> host except in the docker image where it is exposed to <code>0.0.0.0</code>. Of course you can change that by setting the <code>GOLIAC_SERVER_HOST</code> environment variable.</p><p>If you want to open the UI (and the REST APIs) but in a limited way, you will need to use a side-car (in kubernetes) or something similar, to setup a basic authentication, or a better mechanism.</p><p>For example a basic authentication using Apache, can be configured like:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;IfModule mod_ssl.c&gt;</span></span>
<span class="line"><span>&lt;VirtualHost *:443&gt;</span></span>
<span class="line"><span>	ServerName goliac.mydomain.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        &lt;Location /&gt; #the / has to be there, otherwise Apache startup fails</span></span>
<span class="line"><span>            #Deny from all</span></span>
<span class="line"><span>            #Allow from (You may set IP here / to access without password)</span></span>
<span class="line"><span>            AuthUserFile /etc/apache2/htpasswd/goliac</span></span>
<span class="line"><span>            AuthName authorization</span></span>
<span class="line"><span>            AuthType Basic</span></span>
<span class="line"><span>            #Satisfy Any # (or all, if IPs specified and require IP + pass)</span></span>
<span class="line"><span>            #            # any means neither ip nor pass</span></span>
<span class="line"><span>            require valid-user</span></span>
<span class="line"><span>        &lt;/Location&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	ProxyRequests Off</span></span>
<span class="line"><span>	&lt;Proxy *&gt;</span></span>
<span class="line"><span>	Order deny,allow</span></span>
<span class="line"><span>	Allow from all</span></span>
<span class="line"><span>	&lt;/Proxy&gt;</span></span>
<span class="line"><span>	ProxyPass / http://localhost:8080/</span></span>
<span class="line"><span>	ProxyPassReverse / http://localhost:8080/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  RewriteEngine on</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>&lt;/VirtualHost&gt;</span></span>
<span class="line"><span>&lt;/IfModule&gt;</span></span></code></pre></div><h2 id="logs-and-pii" tabindex="-1">Logs and PII <a class="header-anchor" href="#logs-and-pii" aria-label="Permalink to &quot;Logs and PII&quot;">​</a></h2><p>By default Goliac will logs</p><ul><li>in text format (you can change it via <code>GOLIAC_LOGRUS_FORMAT</code> to <code>json</code>)</li><li>as info (you can change it via <code>GOLIAC_LOGRUS_LEVEL</code> to <code>warn</code> or <code>error</code>)</li></ul><p>Intentionally, with the (default) info level, Goliac will output command it is running, with some PII informations (name of the author of the change, some information on the changes. you can check the <code>internal/engine/goliac_reconciliator.go</code> for more details, especially all <code>logrus.WithFields</code> code). It is the intented behaviour to be able to collect what Goliac is doing.</p><p>It will output something like</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>time=&quot;2024-11-10T04:03:14-05:00&quot; level=info msg=&quot;teamslug: a_github_team, username: a_username_githubid, role: member&quot; author=author_of_the_commit command=update_team_add_member dryrun=false</span></span></code></pre></div><p>If you want to restrict this behaviour, you can change the log level (to <code>warn</code> or <code>error</code>), and you can still keep the audit feature of Goliac, by reviewing the Git history of your teams repository (in Github)</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/goliac/installation.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Installation</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/goliac/troubleshooting.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Troubleshooting</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"fnGq7tT_\",\"installation.md\":\"BDTwUTRF\",\"quick_start.md\":\"D_UoJjGk\",\"security.md\":\"DJ3lZZSr\",\"troubleshooting.md\":\"i5I2-Uxp\",\"why_goliac.md\":\"CWonvSTK\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Goliac project\",\"description\":\"Github Organization IAC made simple\",\"base\":\"/goliac/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"logo\":\"/logo_small.png\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Documentation\",\"link\":\"/installation\"}],\"sidebar\":[{\"text\":\"Documentation\",\"items\":[{\"text\":\"Why Goliac\",\"link\":\"/why_goliac\"},{\"text\":\"Quick start\",\"link\":\"/quick_start\"},{\"text\":\"Installation\",\"link\":\"/installation\"},{\"text\":\"Security\",\"link\":\"/security\"},{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Alayacare/goliac\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>