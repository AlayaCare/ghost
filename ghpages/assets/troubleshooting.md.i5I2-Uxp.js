import{_ as s,c as a,o as t,ae as e}from"./chunks/framework.C0FZg82U.js";const d=JSON.parse('{"title":"Troubleshooting guide","description":"","frontmatter":{},"headers":[],"relativePath":"troubleshooting.md","filePath":"troubleshooting.md"}'),o={name:"troubleshooting.md"};function n(h,i,l,r,p,k){return t(),a("div",null,i[0]||(i[0]=[e(`<h1 id="troubleshooting-guide" tabindex="-1">Troubleshooting guide <a class="header-anchor" href="#troubleshooting-guide" aria-label="Permalink to &quot;Troubleshooting guide&quot;">​</a></h1><h2 id="how-to-resolve-the-error-more-than-x-changesets-to-apply-total-of-y-this-is-suspicious-aborting" tabindex="-1">How to resolve the error &quot;more than X changesets to apply (total of Y), this is suspicious. Aborting&quot; <a class="header-anchor" href="#how-to-resolve-the-error-more-than-x-changesets-to-apply-total-of-y-this-is-suspicious-aborting" aria-label="Permalink to &quot;How to resolve the error &quot;more than X changesets to apply (total of Y), this is suspicious. Aborting&quot;&quot;">​</a></h2><p>This error is happening if a changeset (a team&#39;s PR) introduce more than X changesets. This is a safety mechanism to avoid applying a huge number of changesets at once.</p><p>If it is a legitimate change, you can</p><ul><li>either increase the <code>max_changesets</code> in the <code>goliac.yaml</code> file, but that&#39;s not the best approach.</li><li>create a new PR to reduce the number of changes, Goliac will automatically apply the cumulative changesets.</li><li>or you can use the CLI to force apply the changesets. To do so, you can run the following command:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_ORGANIZATION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your organization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">github app id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_PRIVATE_KEY_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">github app private key filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GOLIAC_MAX_CHANGESETS_OVERRIDE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ./goliac</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">github</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> teams</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">branc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>For example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_ORGANIZATION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">goliac-project</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123456</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GOLIAC_GITHUB_APP_PRIVATE_KEY_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">github-app-private-key.pem</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GOLIAC_MAX_CHANGESETS_OVERRIDE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ./goliac</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/goliac-project/teams</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre></div><p>Note: it is possible that Goliac will be a bit confused after your force changes. You will certainly need to restart Goliac (app/kubernetes pod) just after running this command,</p><h2 id="how-to-bypass-goliac-for-a-specific-repository" tabindex="-1">How to bypass Goliac for a specific repository <a class="header-anchor" href="#how-to-bypass-goliac-for-a-specific-repository" aria-label="Permalink to &quot;How to bypass Goliac for a specific repository&quot;">​</a></h2><p>If you want to force merge a PR without Goliac validation, you will need to disable Golac for this specific repository temporarily. To do so, as a Gitbub admin, you can go to</p><ul><li>the Github organization settings,</li><li>on the left menu, under <code>Code planning and automation</code> / <code>Repositories</code>, search for <code>Rulesets</code></li><li>usually there is a <code>default</code> ruleset, click on it</li><li>then under <code>Target repositories</code>, you can search for the repository you want to bypass Goliac for, unselect it</li><li>then click on <code>Save changes</code> (at the bottom of the page)</li></ul><p>Note:</p><ul><li>When Goliac will run (and its cache expires), it will put back the ruleset. Usually the cache is set to 86400 seconds (ie 1 day).</li><li>if you want to re-apply the ruleset quickly (when you have finished with your emergency chage), you can go to the Goliac UI and click on the <code>Flush cache</code> button, and then click on the <code>Re-Sync</code> button.</li></ul><h2 id="how-to-resolve-not-enough-owners-for-team-filename-xxx-warning" tabindex="-1">How to resolve &quot;not enough owners for team filename XXX&quot; warning <a class="header-anchor" href="#how-to-resolve-not-enough-owners-for-team-filename-xxx-warning" aria-label="Permalink to &quot;How to resolve &quot;not enough owners for team filename XXX&quot; warning&quot;">​</a></h2><p>This error is happening if a team does not have enough owners. Indeed a team must have at least 2 owners to be able to review and merge PRs (and the only owner cannot approve its own PRs).</p><p>As an admin you should add more owners to the team.</p><h2 id="goliac-is-trying-to-add-a-user-that-is-no-longer-part-of-the-organization" tabindex="-1">Goliac is trying to add a user that is no longer part of the organization <a class="header-anchor" href="#goliac-is-trying-to-add-a-user-that-is-no-longer-part-of-the-organization" aria-label="Permalink to &quot;Goliac is trying to add a user that is no longer part of the organization&quot;">​</a></h2><p>Maybe the user is still part of the SSO group, but not part of the organization anymore. The best way to solve it is to remove the user from the SSO group:</p><p>As an admin try to go to <code>https://github.com/orgs/&lt;your organization&gt;/people/&lt;github user&gt;/sso</code> and revoke the user from the SSO group.</p>`,20)]))}const g=s(o,[["render",n]]);export{d as __pageData,g as default};
